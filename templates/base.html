<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Taekwondo{% endblock %}</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sets.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/effects.css') }}">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_users.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>

<body class="page-{{ request.endpoint }}">

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="ui-toast ui-toast--{{ category }}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="layout-app">

  <!-- ===== HEADER ===== -->
  <div class="layout-container-full layout-header-wrapper">
    <header class="layout-header-main">

      <!-- LOGO -->
      <div class="layout-header-logo">
        <a href="{{ url_for('sets') }}">
          <img src="{{ url_for('static', filename='logo.jpg') }}">
        </a>
      </div>

      <!-- TITLE -->
      <div class="layout-header-title">
        Há»† THá»NG Ã”N Táº¬P TAEKWONDO
      </div>

      <!-- ACTIONS -->
      <div class="layout-header-actions">

        <!-- â˜° HAMBURGER -->
        <button class="hamburger-btn" id="hamburgerBtn">â˜°</button>

        <!-- USER PANEL -->
        <div id="userPanel" class="user-panel">
          <div class="user-hello">
            Xin chÃ o! <b>{{ current_user.username }}</b>
          </div>

          <a href="{{ url_for('account') }}">ğŸ‘¤ TÃ i khoáº£n</a>
          <a href="{{ url_for('settings') }}">â±ï¸ CÃ i Ä‘áº·t Ã´n táº­p</a>

          {% if current_user.role == "admin" %}
            <div class="menu-divider"></div>
            <a href="{{ url_for('admin_questions') }}">ğŸ“Š Táº¡o cÃ¢u há»i</a>
            <a href="{{ url_for('admin_access') }}">ğŸ” Cáº¥p quyá»n truy cáº­p</a>
            <a href="{{ url_for('admin_users') }}">ğŸ‘¥ Quáº£n lÃ½ user</a>
          {% endif %}

          <div class="menu-divider"></div>
          <a href="{{ url_for('logout') }}">ğŸšª ÄÄƒng xuáº¥t</a>
        </div>

      </div>
    </header>
  </div>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="layout-content">
    {% block content %}{% endblock %}
  </main>

  <!-- ===== FOOTER ===== -->
  {% if current_user.is_authenticated %}
  <footer class="layout-footer">
    Â© {{ current_year }} â€“ Created by Nguyen Thien Phung
  </footer>
  {% endif %}

</div>

<!-- ==================================================
     ğŸ”¥ GLOBAL MODAL ROOT (Cá»°C Ká»² QUAN TRá»ŒNG)
     Má»ŒI MODAL Sáº¼ ÄÆ¯á»¢C Äáº¨Y RA NGOÃ€I LAYOUT
================================================== -->
<div id="modal-root"></div>

<!-- ===== HAMBURGER SCRIPT ===== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("hamburgerBtn");
  const panel = document.getElementById("userPanel");

  if (btn && panel) {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      panel.classList.toggle("show");
    });

    document.addEventListener("click", () => {
      panel.classList.remove("show");
    });

    panel.addEventListener("click", (e) => {
      e.stopPropagation();
    });
  }
});
</script>

{% block scripts %}{% endblock %}
</body>
</html>
